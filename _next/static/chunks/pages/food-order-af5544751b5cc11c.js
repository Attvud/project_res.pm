(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{938:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/food-order",function(){return c(3680)}])},3680:function(d,b,a){"use strict";a.r(b),a.d(b,{"default":function(){return q}});var e=a(5893),c=a(7294),f=a(5287),g=c.createContext({});function h(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function j(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){i(d,a,c[a])})}return d}function k(a){return function(a){if(Array.isArray(a))return h(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||l(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(a,c){if(a){if("string"==typeof a)return h(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return h(a,c)}}var m={items:[],itemsTotalAmount:null,itemsTotalPrice:null},n=function(a,b){if("ADD_ITEM"===b.type){var h,i,q=a.items.findIndex(function(a){return a.id===b.item.id}),d=a.items[q],l=a.itemsTotalAmount,m=a.itemsTotalPrice;return d?(d.neededAmount+b.item.neededAmount<=d.amountInStock?(l+=b.item.neededAmount,m+=b.item.neededAmount*b.item.price,i=j({},d,{neededAmount:d.neededAmount+b.item.neededAmount})):i=d,(h=k(a.items))[q]=i):(l+=b.item.neededAmount,m+=b.item.neededAmount*b.item.price,h=a.items.concat(b.item)),j({},a,{items:h,itemsTotalAmount:l,itemsTotalPrice:m})}if("REMOVE_ITEM"===b.type){var w=a.items.findIndex(function(a){return a.id===b.id}),n=a.items[w],x=a.items.filter(function(a){return a.id!==b.id}),y=a.itemsTotalAmount-n.neededAmount,z=a.itemsTotalPrice-n.neededAmount*n.price;return j({},a,{items:x,itemsTotalAmount:y,itemsTotalPrice:z})}if("SET_ITEMS_TOTAL_AMOUNT"===b.type){var A=a.items.reduce(function(a,b){return a+b.neededAmount},0);return j({},a,{itemsTotalAmount:A})}if("SET_ITEMS_TOTAL_PRICE"===b.type){var B=a.items.reduce(function(b,a){return b+a.price*a.neededAmount},0);return j({},a,{itemsTotalPrice:B})}if("SYNC_WITH_LOCALSTORAGE"===b.type){var o=JSON.parse(localStorage.getItem("cart"));return null===o||"object"!=typeof o[0]?(localStorage.setItem("cart","[]"),{items:[]}):{items:o}}if("INCREASE_ITEM_AMOUNT"===b.type){var r=a.items.findIndex(function(a){return a.id===b.id}),e=a.items[r],s=k(a.items),t=a.itemsTotalAmount,u=a.itemsTotalPrice;if(e.neededAmount+b.amount<=e.amountInStock){t+=b.amount,u+=b.amount*e.price;var C=j({},e,{neededAmount:e.neededAmount+b.amount});s[r]=C}return j({},a,{items:s,itemsTotalAmount:t,itemsTotalPrice:u})}if("DECREASE_ITEM_AMOUNT"===b.type){var v=a.items.findIndex(function(a){return a.id===b.id}),c=a.items[v],p=k(a.items),f=a.itemsTotalAmount,g=a.itemsTotalPrice;if(c.neededAmount-b.amount>=1){f-=b.amount,g-=b.amount*c.price;var D=j({},c,{neededAmount:c.neededAmount-b.amount});p[v]=D}else c.neededAmount-b.amount<1?(f-=c.neededAmount,g-=c.neededAmount*c.price,p=a.items.filter(function(a){return a.id!==b.id})):(f-=b.amount,g-=b.amount*c.price);return j({},a,{items:p,itemsTotalAmount:f,itemsTotalPrice:g})}throw new Error},o=function(h){var a,d,f=(a=c.useReducer(n,m),d=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,d)||l(a,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=f[0],i=f[1];return c.useEffect(function(){i({type:"SYNC_WITH_LOCALSTORAGE"}),i({type:"SET_ITEMS_TOTAL_AMOUNT"}),i({type:"SET_ITEMS_TOTAL_PRICE"})},[]),c.useEffect(function(){localStorage.setItem("cart",JSON.stringify(b.items))},[b.items]),(0,e.jsx)(g.Provider,{value:{items:b.items,itemsTotalAmount:b.itemsTotalAmount,itemsTotalPrice:b.itemsTotalPrice,onAddItem:function(a){return i({type:"ADD_ITEM",item:a})},onRemoveItem:function(a){return i({type:"REMOVE_ITEM",id:a})},onIncreaseItemAmount:function(a,b){return i({type:"INCREASE_ITEM_AMOUNT",id:a,amount:b})},onDecreaseItemAmount:function(a,b){return i({type:"DECREASE_ITEM_AMOUNT",id:a,amount:b})}},children:h.children})};function p(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var q=function(h){var a,b,d=(a=c.useState([]),b=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return p(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return p(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=d[0],i=d[1];return c.useEffect(function(){fetch("/api/food-order/shop-items").then(function(a){return a.json()}).then(function(a){return i(a)})},[]),(0,e.jsx)(o,{children:(0,e.jsx)("div",{className:"flex w-full flex-col items-center py-8",children:(0,e.jsxs)("div",{className:"flex w-full max-w-screen-xl flex-col py-16",children:[(0,e.jsx)(f.k3,{shopItems:g}),(0,e.jsx)(f.AP,{})]})})})}}},function(a){a.O(0,[287,774,888,179],function(){return a(a.s=938)}),_N_E=a.O()}])